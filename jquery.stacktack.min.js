(function(a){a.fn.stacktack=function(d){var b=a.extend(a.fn.stacktack.defaults,d);if(b.stylesheet){if(a("link[href="+b.stylesheet+"]").length===0){if(document.createStyleSheet){document.createStyleSheet("stacktack.css")}else{a('<link rel="stylesheet" type="text/css" href="'+b.stylesheet+'" />').appendTo("head")}}}function c(e){return'<div class="stacktack-profile"><img src="http://www.gravatar.com/avatar/'+e.email_hash+'?d=identicon&s=32" class="stacktack-gravatar" /><a href="http://www.'+b.site+"/users/"+e.user_id+'" target="_blank">'+e.display_name+"</a><br/>"+e.reputation+"</div>"}return this.each(function(){var e=a(this);e.filter("[id^=stacktack]").add(e.find("[id^=stacktack]")).each(function(g,i){var h=a(i);var f=/\d+$/.exec(i.id);a.ajax({dataType:"jsonp",data:{type:"jsontext",apikey:"kz4oNmbazUGoJIUyUbSaLg",body:"true"},url:"http://api."+b.site+"/"+b.apiVersion+"/questions/"+f[0]+"?jsonp=?",success:function(r){var n=r.questions[0];var v=a('<div class="stacktack-container"></div>');var t=a('<div class="stacktack-content"><a href="http://www.stacktack.com/" target="_blank" title="StackTack"><img src="logo.png" alt="StackTack" title="StackTack" class="stacktack-logo" /></a></div>');v.append(t);var p=a('<div class="stacktack-question"> <div class="stacktack-question-header clearfix">'+c(n.owner)+'<h3><a href="http://www.'+b.site+"/questions/"+n.question_id+'" target="_blank">'+n.title+'</a></h3><div class="stacktack-votes">'+n.score+' Votes</div></div><div class="stacktack-question-body">'+n.body+"</div></div>");t.append(p);if(b.showTags){var o=a('<ul class="stacktack-tags"></ul>');for(var s=0;s<n.tags.length;s++){var k=a("<li>"+n.tags[s]+"</li>");o.append(k)}p.append(o)}var q=a('<div class="stacktack-answers"></div>');t.append(q);var j=[];if(n.answers.length>0){if(b.onlyShowAcceptedAnswer){for(var s=0;s<n.answers.length;s++){if(n.answers[s].accepted){j.push(s)}}}else{if(b.filterAnswers.length>0){for(var s=0;s<n.answers.length;s++){if(a.inArray(n.answers[s].answer_id,b.filterAnswers)>-1){j.push(s)}}}else{if(b.answerLimit>0){for(var s=0;s<b.answerLimit;s++){j.push(s)}}}}}for(var s=0;s<n.answers.length;s++){var u=n.answers[s];var m=a('<div class="stacktack-answer"><div class="stacktack-answer-header clearfix">'+c(u.owner)+'<h4><a href="http://www.'+b.site+"/questions/"+n.question_id+"#"+u.answer_id+'" target="_blank">Answer '+(s+1)+'</a></h4><div class="stacktack-votes">'+u.score+' Votes</div></div><div class="stacktack-answer-body">'+u.body+"</div></div>");if(u.accepted){m.addClass("stacktack-answer-accepted");m.find(".stacktack-answer-header h4").prepend('<img src="check.png" alt="Accepted" title="Accepted" class="stacktack-answer-check" />');m.find(".stacktack-votes").append(" | Accepted")}if(a.inArray(s,j)==-1){m.hide()}q.append(m)}v.find("a").attr("target","_blank");if(j.length>0){var l=a('<a href="#" class="stacktack-answers-more>+ More Answers</div>"');l.click(function(){a(this).hide();q.find(".stacktack-answer:hidden").slideDown("fast");return false});q.append(l)}h.append(v)}})})})};a.fn.stacktack.defaults={site:"stackoverflow.com",apiVersion:0.8,stylesheet:"stacktack.css",answerLimit:0,onlyShowAcceptedAnswer:false,filterAnswers:[],showTags:true}})(jQuery);