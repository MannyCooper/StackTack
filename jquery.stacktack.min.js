(function(a){a.fn.stacktack=function(d){var b=a.extend(a.fn.stacktack.defaults,d);if(b.stylesheet){if(a("link[href="+b.stylesheet+"]").length===0){if(document.createStyleSheet){document.createStyleSheet("stacktack.css")}else{a('<link rel="stylesheet" type="text/css" href="'+b.stylesheet+'" />').appendTo("head")}}}function c(e){return'<div class="stacktack-profile"><img src="http://www.gravatar.com/avatar/'+e.email_hash+'?d=identicon&s=32" class="stacktack-gravatar" /><a href="http://www.'+b.site+"/users/"+e.user_id+'" target="_blank">'+e.display_name+"</a><br/>"+e.reputation+"</div>"}return this.each(function(){var e=a(this);e.filter("[id^=stacktack]").add(e.find("[id^=stacktack]")).each(function(g,i){var h=a(i);var f=/\d+$/.exec(i.id);var k=a('<div class="stacktack-container"></div>');var j=a('<div class="stacktack-content"><a href="http://www.stacktack.com/" target="_blank" title="StackTack" class="stacktack-logo"><h2>StackTack</h2></a></div>');k.append(j);a.ajax({dataType:"jsonp",data:{apikey:"kz4oNmbazUGoJIUyUbSaLg",body:"true"},url:"http://api."+b.site+"/"+b.apiVersion+"/questions/"+f[0]+"?jsonp=?",success:function(t){var p=t.questions[0];var r=a('<div class="stacktack-question"> <div class="stacktack-question-header clearfix">'+c(p.owner)+'<h3><a href="http://www.'+b.site+"/questions/"+p.question_id+'" target="_blank">'+p.title+'</a></h3><div class="stacktack-votes">'+p.score+' Votes</div></div><div class="stacktack-question-body">'+p.body+"</div></div>");j.append(r);if(b.showTags){var q=a('<ul class="stacktack-tags"></ul>');for(var u=0;u<p.tags.length;u++){var m=a("<li>"+p.tags[u]+"</li>");q.append(m)}r.append(q)}var s=a('<div class="stacktack-answers"></div>');j.append(s);var l=[];if(p.answers.length>0){if(b.onlyShowAcceptedAnswer){for(var u=0;u<p.answers.length;u++){if(p.answers[u].accepted){l.push(u)}}}else{if(b.filterAnswers.length>0){for(var u=0;u<p.answers.length;u++){if(a.inArray(p.answers[u].answer_id,b.filterAnswers)>-1){l.push(u)}}}else{if(b.answerLimit>0){for(var u=0;u<b.answerLimit;u++){l.push(u)}}}}}for(var u=0;u<p.answers.length;u++){var v=p.answers[u];var o=a('<div class="stacktack-answer"><div class="stacktack-answer-header clearfix">'+c(v.owner)+'<h4><a href="http://www.'+b.site+"/questions/"+p.question_id+"#"+v.answer_id+'" target="_blank">Answer '+(u+1)+'</a></h4><div class="stacktack-votes">'+v.score+' Votes</div></div><div class="stacktack-answer-body">'+v.body+"</div></div>");if(v.accepted){o.addClass("stacktack-answer-accepted");o.find(".stacktack-answer-header h4").prepend('<span alt="Accepted" title="Accepted" class="stacktack-answer-check"></span>');o.find(".stacktack-votes").append(" | Accepted")}if(a.inArray(u,l)==-1){o.hide()}s.append(o)}k.find("a").attr("target","_blank");if(l.length>0){var n=a('<a href="#" class="stacktack-answers-more">+ More Answers</a>"');n.click(function(){a(this).hide();s.find(".stacktack-answer:hidden").slideDown("fast");return false});s.append(n)}}});h.append(k)})})};a.fn.stacktack.defaults={site:"stackoverflow.com",apiVersion:0.8,stylesheet:"stacktack.css",answerLimit:0,onlyShowAcceptedAnswer:false,filterAnswers:[],showTags:true}})(jQuery);